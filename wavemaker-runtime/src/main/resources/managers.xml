<?xml version="1.0" encoding="UTF-8"?>

<!--
Base manager bean definitions.  These are shared between test and runtime
and every other time.
-->
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- ServiceManager bean.  This is autowired to have all the ServiceWires in the
        current configuration. -->
    <bean id="serviceManager"
            class="com.wavemaker.runtime.service.ServiceManager"
            scope="singleton">
    </bean>
    <bean id="serviceManagerBeanPostProcessor" class="com.wavemaker.runtime.service.ServiceManagerBeanPostProcessor" scope="singleton">
        <property name="serviceManager">
            <ref bean="serviceManager" />
        </property>
    </bean>

    <!-- Base TypeManager; this must be extended. -->
    <bean id="typeManagerBase"
            class="com.wavemaker.runtime.service.TypeManager"
            scope="singleton">
        <property name="types">
            <map merge="true">
            </map>
        </property>
        <property name="serviceManager">
            <ref bean="serviceManager" />
        </property>
    </bean>

    <!-- module manager -->
    <bean id="moduleManager"
            class="com.wavemaker.runtime.module.ModuleManager"
            scope="singleton">
    </bean>
    <bean class="com.wavemaker.runtime.module.ModuleManagerBeanPostProcessor">
        <property name="moduleManager">
            <ref bean="moduleManager" />
        </property>
    </bean>
    <import resource="classpath*:/module-configuration.xml" />
</beans>
